!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@cloudinary/angular-5.x",["exports","@angular/core","@angular/common"],e):e((t.cloudinary=t.cloudinary||{},t.cloudinary["angular-5"]=t.cloudinary["angular-5"]||{},t.cloudinary["angular-5"].x={}),t.ng.core,t.ng.common)}(this,function(t,r,n){"use strict";function i(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=n.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n["return"])&&i.call(n)}finally{if(o)throw o.error}}return a}function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}var e=function(t){return t&&"string"==typeof t&&null!==t.trim().match(/^{[\s\S]*?}$/)},a=function(t){return t&&("NamedNodeMap"===t.constructor.name||t instanceof NamedNodeMap)},s=function(r){var o={};return Object.keys(r).forEach(function(t){var e=r[t].name,i=r[t].value;o[e]=i}),o},c=function(t){var r=t;return e(t)?r=JSON.parse(t):a(t)&&(r=s(t)),Array.isArray(r)?r=r.map(function(t){return c(t)}):"object"==typeof r&&Object.keys(r).forEach(function(t){var e=t.replace(/-/g,"_").toLocaleLowerCase().replace(/^cld(-|_)?/,""),i=c(r[t]);delete r[t],r[e]=i}),r},l=function(){function t(t,e){t.CloudinaryJQuery?this._cloudinaryInstance=new t.CloudinaryJQuery(e):this._cloudinaryInstance=new t.Cloudinary(e)}return Object.defineProperty(t.prototype,"cloudinaryInstance",{get:function(){return this._cloudinaryInstance},enumerable:!0,configurable:!0}),t.prototype.config=function(){return this._cloudinaryInstance.config()},t.prototype.url=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(t=this._cloudinaryInstance).url.apply(t,o(e))},t.prototype.imageTag=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(t=this._cloudinaryInstance).imageTag.apply(t,o(e))},t.prototype.videoTag=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(t=this._cloudinaryInstance).videoTag.apply(t,o(e))},t.prototype.responsive=function(t,e){this._cloudinaryInstance.cloudinary_update(t,e),this._cloudinaryInstance.responsive(e,!1)},t.prototype.toCloudinaryAttributes=function(t,e){var i=this,r=c(t);return e&&0<e.length&&(r.transformation=[],e.forEach(function(t){r.transformation.push(i.toCloudinaryAttributes(t.getAttributes()))})),""!==r.responsive&&"true"!==r.responsive&&!0!==r.responsive||(r.responsive=!0),r},t}();var u=function(){return"undefined"!=typeof window},d=function(){function t(t){this.el=t}return t.prototype.getAttributes=function(){return this.el.nativeElement.attributes},t.decorators=[{type:r.Directive,args:[{selector:"cl-transformation"}]}],t.ctorParameters=function(){return[{type:r.ElementRef}]},t}(),p={darkmode:{effect:"tint:75:black"},brightmode:{effect:"tint:50:white"},monochrome:{effect:"grayscale"},colorblind:{effect:"assist_colorblind"}},h=[{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:1,height:1,gravity:"north_east"},{fetch_format:"auto",quality:"auto"}],f={vectorize:{effect:"vectorize",quality:1},pixelate:{effect:"pixelate",quality:1,fetch_format:"auto"},blur:{effect:"blur:2000",quality:1,fetch_format:"auto"},"predominant-color":[{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:10,height:10,gravity:"north_east"},{width:"iw",height:"ih",crop:"fill"},{fetch_format:"auto",quality:"auto"}]},y=function(){function t(t){this.cloudinary=t,this.options={}}return t.prototype.setWidth=function(t){this.itemWidth=t},t.prototype.setHeight=function(t){this.itemHeight=t},t.prototype.setPublicId=function(t){this.publicId=t},t.prototype.ngAfterContentChecked=function(){this.placeholderImg=this.getPlaceholderImage()},t.prototype.getPlaceholderImage=function(){return"predominant-color"===this.type&&this.itemHeight&&this.itemWidth?this.cloudinary.url(this.publicId,{transformation:o([this.options],h)}):this.cloudinary.url(this.publicId,{transformation:o([this.options],f[this.type]||f.blur)})},t.decorators=[{type:r.Component,args:[{selector:"cl-placeholder",template:'<img [src]="this.placeholderImg" [style.width.px]="this.itemWidth" [style.height.px]="this.itemHeight">'}]}],t.ctorParameters=function(){return[{type:l}]},t.propDecorators={type:[{type:r.Input,args:["type"]}],itemWidth:[{type:r.HostBinding,args:["style.width"]}],itemHeight:[{type:r.HostBinding,args:["style.height"]}],publicId:[{type:r.HostBinding,args:["attr.public-id"]}]},t}(),g=function(){function t(t,e){this.el=t,this.cloudinary=e,this.onLoad=new r.EventEmitter,this.onError=new r.EventEmitter,this.shouldShowPlaceHolder=!0,this.options={}}return t.prototype.ngOnInit=function(){var t=this;if(u()){this.observer=new MutationObserver(function(){t.loadImage()});this.observer.observe(this.el.nativeElement,{attributes:!0,childList:!0})}},t.prototype.ngOnChanges=function(t){t.publicId&&!t.publicId.isFirstChange()&&this.loadImage()},t.prototype.ngOnDestroy=function(){this.observer&&this.observer.disconnect&&this.observer.disconnect()},t.prototype.ngAfterViewInit=function(){this.loadImage()},t.prototype.ngAfterContentChecked=function(){this.width&&this.placeholderComponent&&this.placeholderComponent.setWidth(this.width),this.height&&this.placeholderComponent&&this.placeholderComponent.setHeight(this.height),this.placeholderComponent&&this.placeholderComponent.setPublicId(this.publicId)},t.prototype.hasLoaded=function(){this.shouldShowPlaceHolder=!1},t.prototype.loadImage=function(){var e=this;if(u()){if(!this.publicId)throw new Error("You must set the public id of the image to load, e.g. <cl-image public-id={{photo.public_id}}...></cl-image>");var t=this.el.nativeElement,i=t.children[0];i.onload=function(t){e.onLoad.emit(t)},i.onerror=function(t){e.onError.emit(t)};var r=this.cloudinary.toCloudinaryAttributes(t.attributes,this.transformations);(this.clientHints||"undefined"==typeof this.clientHints&&this.cloudinary.config().client_hints)&&(delete r["class"],delete r["data-src"],delete r.responsive),this.placeholderComponent&&this.placeholderHandler(r),this.accessibility&&((this.options=r).src=this.accessibilityModeHandler());var o=this.cloudinary.imageTag(this.publicId,r);this.setElementAttributes(i,o.attributes()),r.responsive&&this.cloudinary.responsive(i,r)}},t.prototype.setElementAttributes=function(i,r){var o=this;Object.keys(r).forEach(function(t){var e="src"===t&&"lazy"===o.loading?"data-src":t;i.setAttribute(e,r[t])})},t.prototype.placeholderHandler=function(e){var i={};Object.keys(e).forEach(function(t){i[t]="width"===t&&!e[t].startsWith("auto")||"height"===t?Math.ceil(.1*parseInt(e[t],10)):e[t]}),this.placeholderComponent.options=i},t.prototype.accessibilityModeHandler=function(){return this.cloudinary.url(this.publicId,{transformation:[this.options,p[this.accessibility]]})},t.decorators=[{type:r.Component,args:[{selector:"cl-image",template:"<img [ngStyle]=\"{opacity: shouldShowPlaceHolder ? '0' : '1', position: shouldShowPlaceHolder ? 'absolute' : 'unset'}\"(load)=\"hasLoaded()\">\n  <div [style.display]=\"shouldShowPlaceHolder ? 'inline' : 'none'\">\n      <ng-content></ng-content>\n  </div>\n  "}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:l}]},t.propDecorators={publicId:[{type:r.Input,args:["public-id"]}],clientHints:[{type:r.Input,args:["client-hints"]}],loading:[{type:r.Input,args:["loading"]}],width:[{type:r.Input,args:["width"]}],height:[{type:r.Input,args:["height"]}],accessibility:[{type:r.Input,args:["accessibility"]}],transformations:[{type:r.ContentChildren,args:[d]}],placeholderComponent:[{type:r.ContentChild,args:[y]}],onLoad:[{type:r.Output}],onError:[{type:r.Output}]},t}(),m=function(){function t(t,e,i){this.el=t,this.cloudinary=e,this.platformId=i}return t.prototype.ngOnInit=function(){var t=this;if("undefined"!=typeof MutationObserver){this.observer=new MutationObserver(function(){t.loadVideo(t.publicId)});this.observer.observe(this.el.nativeElement,{attributes:!0,childList:!0})}},t.prototype.ngOnChanges=function(t){t.publicId&&!t.publicId.isFirstChange()&&this.loadVideo(t.publicId.currentValue)},t.prototype.ngOnDestroy=function(){this.observer&&this.observer.disconnect&&this.observer.disconnect()},t.prototype.ngAfterViewInit=function(){if(!this.publicId)throw new Error("You must set the public id of the video to load, e.g. <cl-video public-id={{video.public_id}}...></cl-video>");this.loadVideo(this.publicId)},t.prototype.loadVideo=function(t){if(n.isPlatformBrowser(this.platformId)){var e=this.el.nativeElement,i=e.children[0],r=this.cloudinary.toCloudinaryAttributes(e.attributes,this.transformations),o=this.cloudinary.videoTag(t,r);this.appendSourceElements(i,o.content()),this.setElementAttributes(i,o.attributes())}},t.prototype.setElementAttributes=function(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})},t.prototype.appendSourceElements=function(t,e){var i=document.createDocumentFragment();for(t.innerHTML=e;t.childNodes[0];)i.appendChild(t.childNodes[0]);t.appendChild(i)},t.decorators=[{type:r.Component,args:[{selector:"cl-video",template:"<video></video>"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:l},{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]}]},t.propDecorators={publicId:[{type:r.Input,args:["public-id"]}],transformations:[{type:r.ContentChildren,args:[d]}]},t}(),v=function(){function t(t,e){this.el=t,this.cloudinary=e}return t.prototype.ngAfterViewInit=function(){if(u()){var t=void 0,e=void 0;this.clHref?(t="href",e=this.clHref):this.clSrc?(t="src",e=this.clSrc):this.clSrcset&&(t="srcset",e=this.clSrcset);var i=!1;if(this.clHref&&toString.call("[object SVGAnimatedString]"===this.el.nativeElement.href)&&(this.el.nativeElement.setAttribute("xlinkHref","xlink:href"),i=!0),!t||!e)throw new Error("Directive value is missing for clHref/clSrc/clSrcset");var r=this.el.nativeElement,o=this.cloudinary.toCloudinaryAttributes(r.attributes,this.transformations),n=this.cloudinary.url(e,o);this.el.nativeElement.setAttribute(t,n),this.el.nativeElement.ownerDocument.documentMode&&!i&&(this.el.nativeElement[t]=n)}},t.decorators=[{type:r.Directive,args:[{selector:"[clHref], [clSrc], [clSrcset]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:l}]},t.propDecorators={clHref:[{type:r.Input}],clSrc:[{type:r.Input}],clSrcset:[{type:r.Input}],transformations:[{type:r.ContentChildren,args:[d]}]},t}(),b=function(){function t(t,e,i){this.renderer=t,this.el=e,this.cloudinary=i}return t.prototype.isBrowser=function(){return"undefined"!=typeof window},t.prototype.ngAfterViewInit=function(){if(this.isBrowser()){var t=this.el.nativeElement,e=this.cloudinary.toCloudinaryAttributes(t.attributes,this.transformations),i=this.cloudinary.url(this.clBackgroundImage,e);this.renderer.setStyle(t,"background-image","url('"+i+"')"),this.renderer.setStyle(t,"background-repeat","no-repeat"),this.renderer.setStyle(t,"background-position","center")}},t.decorators=[{type:r.Directive,args:[{selector:"[clBackgroundImage]"}]}],t.ctorParameters=function(){return[{type:r.Renderer2},{type:r.ElementRef},{type:l}]},t.propDecorators={clBackgroundImage:[{type:r.Input}],transformations:[{type:r.ContentChildren,args:[d]}]},t}(),I=function(){function t(t){this.el=t}return t.prototype.ngAfterViewInit=function(){!this.isNativeLazyLoadSupported()&&this.isLazyLoadSupported()?this.lazyLoad():this.loadImage()},t.prototype.loadImage=function(){var t=this.el.nativeElement.children[0];t.setAttribute("src",t.dataset.src)},t.prototype.isLazyLoadSupported=function(){return window&&"IntersectionObserver"in window},t.prototype.isNativeLazyLoadSupported=function(){return"loading"in HTMLImageElement.prototype},t.prototype.lazyLoad=function(){var e=this,i={rootMargin:"0px 0px -50% 0px"},r=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(e.loadImage(),r.unobserve(t.target))},i)});r.observe(this.el.nativeElement)},t.decorators=[{type:r.Directive,args:[{selector:"cl-image[loading=lazy]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef}]},t}(),C=new r.InjectionToken("CLOUDINARY_LIB"),w=new r.InjectionToken("CLOUDINARY_CONFIGURATION");function E(t,e){return new l(t,e)}var _=function(){function i(){}return i.forRoot=function(t,e){return{ngModule:i,providers:[{provide:C,useValue:t},{provide:w,useValue:e},{provide:l,useFactory:E,deps:[C,w]}]}},i.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule],declarations:[v,b,g,m,d,I,y],exports:[v,b,g,m,d,I,y]}]}],i}();t.provideCloudinary=function A(t,e){return{provide:l,useFactory:function(){return new l(t,e)}}},t.Cloudinary=l,t.isJsonLikeString=e,t.isNamedNodeMap=a,t.transformKeyNames=c,t.namedNodeMapToObject=s,t.isBrowser=u,t.createCloudinary=E,t.CloudinaryImage=g,t.CloudinaryVideo=m,t.CloudinaryTransformationDirective=d,t.CloudinaryImageSourceDirective=v,t.CloudinaryBackgroundImageDirective=b,t.LazyLoadDirective=I,t.CloudinaryPlaceHolder=y,t.CLOUDINARY_LIB=C,t.CLOUDINARY_CONFIGURATION=w,t.CloudinaryModule=_,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cloudinary-angular-5.x.umd.min.js.map